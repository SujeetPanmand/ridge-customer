<section class="py-5 mt-5 bg-light-gray">
    <div class="container">
        <div class="py-5 bg-white px-4">
            <app-bread-crumb [links]="links"></app-bread-crumb>
            <h1 class="sub-title pt-3">Order Payment</h1>
            <div class="row pt-4">
                <div class="col-md-6">
                    <div class="d-flex">
                        <h2 class="text-title">Amount: 0.0</h2>
                    </div>
                        <h2 class="text-title">Order Id: {{orderId}}</h2>
                    <hr class="border" />
                    <span *ngIf="isSelfPickUp" class="pt-3">
                        San Gabriel River In Liberty Hill, Austin, Texas -73301
                    </span>
                    <span class="d-flex" *ngIf="!isSelfPickUp" class="pt-3">
                        <span>
                            {{ orderAddress["address1"] }} in {{ orderAddress["city"] }},
                            {{ orderAddress["state"] }},{{ orderAddress["country"] }},{{
                            orderAddress["zipCode"]
                            }}
                        </span>
                    </span>
                    <h3 class="pt-5 text-title">Payment Method</h3>
                    <hr class="border" />
                    <form [formGroup]="paymentForm">
                        <div class="d-flex">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="flexRadioDefault"
                                    id="flexRadioDefault1" />
                                <i class="bi bi-credit-card"></i>
                                <span class="px-1"> Credit Card </span>
                            </div>
                        </div>
                        <div class="bg-light-gray mt-4 p-4">
                            <div class="mb-3">
                                <label for="cardNumber" class="form-label"> Card Number</label>
                                <div class="input-col">
                                    <input type="text" class="form-control" placeholder="XXX XXX XXXX 9817"
                                        formControlName="cardNumber" pattern="^\d{16}$"
                                        [class.is-invalid]="isFieldValid(paymentForm, 'cardNumber')" 
                                        (input)="onCardNumberInput($event)" maxlength="16" />
                                    <a>
                                        <i [class]="cardIconClass + ' times-icon'" aria-hidden="true"></i>
                                    </a>
                                </div>
                                <span class="text-danger" *ngIf="hasError(paymentForm, 'cardNumber', 'required')">
                                    Please enter a card number.
                                </span>
                                <span class="text-danger"
                                    *ngIf="hasError(paymentForm, 'cardNumber', 'invalidCardNumber')">
                                    Please enter a valid 16-digit card number.
                                </span>
                            </div>
                            <div class="row">
                                <div class="mb-3 col-md-8">
                                    <label for="exp" class="form-label">Expiry Date</label>
                                    <input type="date" id="exp" name="exp " class="form-control"
                                        formControlName="expiryDate"
                                        [class.is-invalid]="isFieldValid(paymentForm, 'expiryDate')" />
                                    <span class="text-danger"
                                        *ngIf="hasError(paymentForm, 'expiryDate', 'required')">Please enter a
                                        expiry date.
                                    </span>
                                </div>
                                <div class="mb-3 col-md-4">
                                    <label for="cvv" class="form-label">CVV</label>
                                    <input type="text" id="cvv" name="cvv" class="form-control" placeholder="---"
                                        formControlName="cvv" [class.is-invalid]="isFieldValid(paymentForm, 'cvv')" />
                                </div>
                                <span class="text-danger" *ngIf="hasError(paymentForm, 'cvv', 'required')">Please enter
                                    a cvv.
                                </span>
                            </div>
                            <div class="mb-3">
                                <label for="cardHoldNumber" class="form-label">Cardholder Name</label>
                                <input type="text" id="cardHolderName" name="cardHolderName" class="form-control"
                                    placeholder="Enter cardholder's full name" formControlName="cardHolderName"
                                    [class.is-invalid]="
                                isFieldValid(paymentForm, 'cardHolderName')
                              " />
                                <span class="text-danger"
                                    *ngIf="hasError(paymentForm, 'cardHolderName', 'required')">Please enter a
                                    cardholder name.
                                </span>
                            </div>
                            <button (click)="createOrder()" class="btn button-orange w-100 mt-4" type="button">
                                Make Payment
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>